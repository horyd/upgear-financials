!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define("library",["_"],t):"object"==typeof exports?exports.library=t(require("lodash")):e.library=t(e._)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.feeComponents=t.depreciation=t.amortisation=void 0;var u=r(2),o=n(u),a=r(3),i=n(a),f=r(4),l=n(f);t.amortisation=o.default,t.depreciation=i.default,t.feeComponents=l.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1,1,1,1,1,1,1,1,1,1],i=t/Math.pow(1+o/12,n),f=e-i,l=u.default.flatten(Array(Math.ceil(n/12)+1).fill(a));if(!(a.every(u.default.isNumber)&&1===u.default.max(a)&&u.default.min(a)>=0))throw new Error("\n      The distribution array provided has invalid entries\n    ");if(!Array.from({length:12},function(e,t){return t}).every(function(e){return u.default.sum(l.slice(e,e+6))>=3&&u.default.sum(l.slice(e,e+12))>=9}))throw new Error("\n      You have too many months with reduced payments, or they are too bunched\n      together. Please edit your payment schedule.\n    ");var c=l.slice(r,r+n);c[0]=1;var s=1+o/12,d=f/u.default.sum(c.map(function(e,t){return e/Math.pow(s,t)})),p=c.map(function(e){return e*d});return{balances:p.reduce(function(t,r,n){return 0===n?t.push(e-r):t.push(u.default.last(t)*s-r),t},[]).map(function(e,t){return e+p[t]}),payments:p}};var n=r(0),u=function(e){return e&&e.__esModule?e:{default:e}}(n);e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,u){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=t/u,i=r*(e-t-a*(n-o))/Math.pow(n-o,r);return Array.from({length:n-o+u+1},function(u,f){if(0===f)return e;if(f<=n-o){var l=i/r*(Math.pow(n-o,r)-Math.pow(f-(n-o),r))+a*f;return e-l}return t-a*(f-(n-o))})},e.exports=t.default},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t,r){return r/12*e/(1-Math.pow(1+r/12,-t))*(1/(1+r/12))}function o(e,t,r){return e*r/12*(1/(Math.pow(1+r/12,t)-1))*(1/(1+r/12))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={disposalSchedule:function(e,t,r){var u=1+r/12,a=o(e,t,r);return{balances:[].concat(n(Array.from({length:t},function(){return a}).reduce(function(e,t,r){return 0===r?e.push(t):e.push(i.default.last(e)*u+t),e},[]).map(function(e,t){return e-a})),[e]),payment:a}},originationSchedule:function(e,t,r){var o=1+r/12,a=u(e,t,r);return{balances:[].concat(n(Array.from({length:t},function(){return a}).reduce(function(t,r,n){return 0===n?t.push(e-r):t.push(i.default.last(t)*o-r),t},[]).map(function(e,t){return e+a})),[0]),payment:a}}},e.exports=t.default}])});